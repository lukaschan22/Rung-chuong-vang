<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rung Chu√¥ng V√†ng - Kh√∫c X·∫° √Ånh S√°ng</title>
    <style>
        /* CSS cho giao di·ªán */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        h1 {
            color: #d9534f;
            margin-bottom: 20px;
            border-bottom: 3px solid #d9534f;
            display: inline-block;
            padding-bottom: 10px;
        }

/* Th√™m style cho ph·∫ßn hi·ªÉn th·ªã Audio Control */
        #audio-controls-container {
            margin: 10px auto 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #ffe0e0;
            max-width: 500px;
            /* ƒê·∫£m b·∫£o n√≥ hi·ªÉn th·ªã ·ªü m√†n h√¨nh b·∫Øt ƒë·∫ßu */
            display: block; 
        }
        
        #audio-controls-container p {
            font-weight: bold;
            color: #d9534f;
            margin-top: 0;
        }
        
        .game-content {
            display: flex;
            gap: 20px;
            width: 100%;
            margin-top: 20px;
        }

        /* B·∫£ng ƒëi·ªÉm */
        #scoreboard {
            width: 250px;
            flex-shrink: 0;
            background-color: #eaf6ff;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #5bc0de;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            text-align: left;
        }

        .group-score {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 1.1em;
            border-bottom: 1px dashed #ccc;
        }
        
        .group-icon {
            margin-right: 5px;
            font-size: 1.2em;
        }

        #game-area {
            flex-grow: 1;
            text-align: left;
        }

        #rules-section {
            border: 2px dashed #f0ad4e;
            padding: 15px;
            margin: 20px auto;
            max-width: 600px;
            background-color: #fffde7;
            text-align: left;
            border-radius: 8px;
        }

        /* ƒê·ªìng h·ªì */
        #timer {
            font-size: 3em;
            color: #d9534f;
            font-weight: bold;
            padding: 0;
            border: 3px solid #d9534f;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            line-height: 100px; 
            margin: 20px auto;
            background-color: #ffeeee;
            text-align: center; 
        }

        #question-display {
            min-height: 250px;
            border: 2px solid #5bc0de;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            background-color: #eaf6ff;
        }

        /* TƒÇNG C·ª† CH·ªÆ C√ÇU H·ªéI V√Ä L·ª∞A CH·ªåN */
        #question-display #question-text {
            font-size: 1.3em; 
            line-height: 1.5;
        }

        #question-display .option {
            font-size: 1.1em; 
        }

        /* ƒê·∫£m b·∫£o ch·ªØ A, B, C, D v√† to√†n b·ªô c√¢u h·ªèi in ƒë·∫≠m */
        #question-text strong, 
        #question-display .option strong {
            font-weight: bold;
        }

        .option.answer {
            background-color: #f0ad4e; 
            color: #333;
            font-weight: normal; 
        }
        
        /* Hi·ªÉn th·ªã input nh·∫≠p ƒë√°p √°n */
        #input-score-section {
            text-align: center;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        /* Thi·∫øt l·∫≠p b·∫£ng nh·∫≠p ƒë√°p √°n */
        #group-answer-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            table-layout: fixed; 
        }

        #group-answer-table th, #group-answer-table td {
            padding: 5px;
            text-align: center;
            border: 1px solid #ddd;
        }

        #group-answer-table input {
            width: 50px;
            text-transform: uppercase;
            text-align: center;
            font-weight: bold;
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        
        .action-button {
            background-color: #5bc0de; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            margin: 5px;
            cursor: pointer;
        }
        
        .calculate-button {
            background-color: #d9534f;
        }
        
        /* --- PH·∫¶N T·ªîNG K·∫æT C·ª† CH·ªÆ L·ªöN V√Ä CƒÇN GI·ªÆA --- */
        #end-game-results {
            margin-top: 30px;
            padding: 40px; 
            background-color: #d4edda;
            color: #155724;
            border: 3px solid #c3e6cb;
            border-radius: 10px;
            display: none;
            text-align: center;
            /* CƒÉn gi·ªØa tuy·ªát ƒë·ªëi trong container */
            margin-left: auto; 
            margin-right: auto;
        }
        
        #end-game-results h3 {
            font-size: 3em; 
            color: #d9534f;
            margin-bottom: 20px;
        }
        
        #end-game-results h4 {
            font-size: 2em; 
            margin-top: 20px;
        }

        #end-game-results ul {
            padding: 0;
            list-style: none;
        }

        #end-game-results ul li {
            font-size: 1.5em; 
            padding: 10px 0;
            border-bottom: 1px dashed #a8c8b4;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üîî RUNG CHU√îNG V√ÄNG üí°</h1>
    <h2>Kh√∫c X·∫° √Ånh S√°ng (L·ªõp 9)</h2>

    <audio id="bgMusic" loop preload="auto">
       <source src="music1.mp3" type="audio/mp3">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ th·∫ª audio.
    </audio>
    
    <audio id="victoryMusic" preload="auto">
       <source src="music2.mp3" type="audio/mp3">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ th·∫ª audio.
    </audio>

    <div id="start-screen">
        <h3>Thi·∫øt l·∫≠p tr√≤ ch∆°i</h3>
        <label for="num-groups">Nh·∫≠p s·ªë l∆∞·ª£ng nh√≥m (1-10):</label>
        <input type="number" id="num-groups" min="1" max="10" value="5">
        
        <div id="rules-section">
            <h4>üìñ LU·∫¨T CH∆†I TR√í CH∆†I RUNG CHU√îNG V√ÄNG</h4>
            <ul>
                <li>Tr√≤ ch∆°i g·ªìm 5 c√¢u h·ªèi tr·∫Øc nghi·ªám (A, B, C, D) ƒë·ªÉ c·ªßng c·ªë b√†i h·ªçc.</li>
                <li>M·ªói c√¢u h·ªèi c√≥ 30 gi√¢y th·ªùi gian tr·∫£ l·ªùi (t·ªëc ƒë·ªô ƒë·∫øm ng∆∞·ª£c nhanh h∆°n 1.5 l·∫ßn).</li>
                <li>Quy t·∫Øc t√≠nh ƒëi·ªÉm: Tr·∫£ l·ªùi ƒë√∫ng ƒë∆∞·ª£c c·ªông 1 ƒëi·ªÉm. Tr·∫£ l·ªùi sai kh√¥ng ƒë∆∞·ª£c ƒëi·ªÉm n√†o.</li>
                <li>Nh√≥m chi·∫øn th·∫Øng l√† nh√≥m ƒë·∫°t ƒëi·ªÉm cao nh·∫•t, s·∫Ω nh·∫≠n ƒë∆∞·ª£c ph·∫ßn qu√†.</li>
            </ul>
        </div>

        <button onclick="startGame()">B·∫Øt ƒê·∫ßu Ch∆°i</button>
    </div>

    <div id="game-screen" style="display:none;">
        <div id="end-game-results"></div>

        <div class="game-content">
            <div id="scoreboard">
                <h3>üèÜ B·∫£ng ƒêi·ªÉm üèÜ</h3>
                <div id="score-list">
                </div>
            </div>

            <div id="game-area">
                <div id="timer">30</div>
                <div id="status-message" style="display:none;">H·∫æT GI·ªú!</div>

                <div id="question-display">
                    <div id="question-text">Click n√∫t "B·∫Øt ƒê·∫ßu" ƒë·ªÉ t·∫£i c√¢u h·ªèi ƒë·∫ßu ti√™n...</div>
                    <div id="options-container"></div>
                </div>

                <div id="answer-input-area">
                    <div id="control-buttons">
                        <button id="start-btn" onclick="nextQuestion()" class="action-button start-next-button">B·∫ÆT ƒê·∫¶U C√ÇU H·ªéI 1</button>
                        <button id="show-answer-btn" onclick="showAnswer()" class="action-button" style="display:none;">XEM ƒê√ÅP √ÅN</button>
                    </div>

                    <div id="input-score-section" style="display:none; margin-top:15px;">
                        <h4>Nh·∫≠p ƒë√°p √°n c·ªßa c√°c nh√≥m (A, B, C, ho·∫∑c D)</h4>
                        <table id="group-answer-table">
                            <tbody id="group-answer-inputs">
                            </tbody>
                        </table>
                        <button id="calculate-btn" onclick="calculateScore()" class="action-button calculate-button" style="display:none;">T√çNH ƒêI·ªÇM C√ÇU N√ÄY</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const TIMER_INTERVAL_MS = 667; 
    const GROUP_ICONS = ['üåü', 'üí°', 'üöÄ', 'üî¨', 'üåç', 'üß™', 'üî•', 'üíß', '‚ö°', '‚ú®'];

    const questions = [
        // C√¢u 1: Gi·ªØ nguy√™n
        { text: "C√¢u 1. Hi·ªán t∆∞·ª£ng kh√∫c x·∫° √°nh s√°ng m√¥ t·∫£ s·ª± thay ƒë·ªïi n√†o c·ªßa tia s√°ng?", options: ["A. Tia s√°ng b·ªã l·ªách kh·ªèi ph∆∞∆°ng truy·ªÅn th·∫≥ng ban ƒë·∫ßu khi ƒëi qua m·ªôt m√¥i tr∆∞·ªùng trong su·ªët duy nh·∫•t.", "B. Tia s√°ng b·ªã b·∫ª cong v√† quay tr·ªü l·∫°i m√¥i tr∆∞·ªùng c≈© khi g·∫∑p m·∫∑t ph√¢n c√°ch gi·ªØa hai m√¥i tr∆∞·ªùng.", "C. Tia s√°ng b·ªã l·ªách kh·ªèi ph∆∞∆°ng truy·ªÅn ban ƒë·∫ßu t·∫°i m·∫∑t ph√¢n c√°ch khi truy·ªÅn t·ª´ m√¥i tr∆∞·ªùng trong su·ªët n√†y sang m√¥i tr∆∞·ªùng trong su·ªët kh√°c.", "D. Tia s√°ng b·ªã ph√¢n t√°ch th√†nh nhi·ªÅu m√†u s·∫Øc kh√°c nhau khi ƒëi qua m√¥i tr∆∞·ªùng trong su·ªët kh√°c."], answerKey: 'C' },
        
        // C√¢u 2: ƒê√£ b·ªè d·∫•u $
        { text: "C√¢u 2. Trong s∆° ƒë·ªì ƒë∆∞·ªùng ƒëi c·ªßa tia s√°ng b·ªã kh√∫c x·∫°, g√≥c kh√∫c x·∫° r ƒë∆∞·ª£c x√°c ƒë·ªãnh l√† g√≥c t·∫°o b·ªüi th√†nh ph·∫ßn n√†o sau ƒë√¢y?", options: ["A. Tia t·ªõi v√† tia kh√∫c x·∫°.", "B. Tia t·ªõi v√† ph√°p tuy·∫øn t·∫°i ƒëi·ªÉm t·ªõi.", "C. Tia kh√∫c x·∫° v√† m·∫∑t ph√¢n c√°ch.", "D. Tia kh√∫c x·∫° v√† ph√°p tuy·∫øn t·∫°i ƒëi·ªÉm t·ªõi."], answerKey: 'D' }, 
        
        // C√¢u 3: ƒê√£ b·ªè d·∫•u $
        { text: "C√¢u 3. Theo ƒë·ªãnh lu·∫≠t kh√∫c x·∫° √°nh s√°ng, ƒë·ªëi v·ªõi hai m√¥i tr∆∞·ªùng trong su·ªët nh·∫•t ƒë·ªãnh, ƒë·∫°i l∆∞·ª£ng n√†o sau ƒë√¢y lu√¥n kh√¥ng ƒë·ªïi khi g√≥c t·ªõi i thay ƒë·ªïi?", options: ["A. Hi·ªáu s·ªë sin i v√† sin r.", "B. T·ªâ s·ªë gi·ªØa sin i v√† sin r.", "C. T·ªâ s·ªë gi·ªØa g√≥c i v√† g√≥c r.", "D. G√≥c kh√∫c x·∫° r."], answerKey: 'B' }, 
        
        // C√¢u 4: ƒê√£ b·ªè d·∫•u $
        { text: "C√¢u 4. T·ªëc ƒë·ªô √°nh s√°ng trong ch√¢n kh√¥ng l√† c = 300000 km/s v√† t·ªëc ƒë·ªô √°nh s√°ng truy·ªÅn trong n∆∞·ªõc l√† v = 225000 km/s. Chi·∫øt su·∫•t c·ªßa n∆∞·ªõc l√† bao nhi√™u?", options: ["A. 1,333.", "B. 1,000.", "C. 1,520.", "D. 1,309."], answerKey: 'A' }, 
        
        // C√¢u 5: ƒê√£ b·ªè d·∫•u $ v√† thay ^{\\circ} th√†nh "ƒë·ªô"
        { text: "C√¢u 5. M·ªôt tia s√°ng truy·ªÅn t·ª´ kh√¥ng kh√≠ n1 ‚âà 1 v√†o n∆∞·ªõc n2 = 1,33. N·∫øu g√≥c kh√∫c x·∫° r = 22 ƒë·ªô th√¨ g√≥c t·ªõi i x·∫•p x·ªâ b·∫±ng bao nhi√™u?", options: ["A. 15 ƒë·ªô", "B. 22 ƒë·ªô", "C. 30 ƒë·ªô", "D. 45 ƒë·ªô"], answerKey: 'C' } 
    ];
    
    const answerKeyMap = { 'A': 0, 'B': 1, 'C': 2, 'D': 3 };

    let currentQuestionIndex = 0;
    let timer;
    let timeLeft = 30;
    let numGroups = 0;
    let groupScores = []; 


    // --- CH·ª®C NƒÇNG AUDIO ---
    function playBackgroundMusic() {
        const bgMusic = document.getElementById('bgMusic');
        document.getElementById('victoryMusic').pause(); 
        
        bgMusic.volume = 0.5; 
        // Th·ª≠ ph√°t, nh∆∞ng ch·ªß y·∫øu d·ª±a v√†o ng∆∞·ªùi d√πng b·∫•m n√∫t Play th·ªß c√¥ng
        bgMusic.play().catch(e => {
            console.log('Background music auto-playback blocked. User must use controls on start screen.');
        });
    }

    function stopBackgroundMusic() {
        const bgMusic = document.getElementById('bgMusic');
        bgMusic.pause();
    }

    function playVictoryMusic() {
        // ƒê·∫£m b·∫£o nh·∫°c n·ªÅn d·ª´ng
        stopBackgroundMusic(); 

        const victoryMusic = document.getElementById('victoryMusic');
        victoryMusic.volume = 0.8; 
        victoryMusic.play().catch(e => {
             console.log('Victory music playback blocked.');
        });
    }

    // --- Kh·ªüi t·∫°o tr√≤ ch∆°i ---
    function startGame() {
        numGroups = parseInt(document.getElementById('num-groups').value) || 5; 
        
        if (numGroups < 1 || numGroups > 10) {
            alert("Vui l√≤ng nh·∫≠p s·ªë l∆∞·ª£ng nh√≥m h·ª£p l·ªá t·ª´ 1 ƒë·∫øn 10.");
            return;
        }
        
        groupScores = [];
        for (let i = 1; i <= numGroups; i++) {
            groupScores.push({ id: i, score: 0 });
        }

        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex'; 
        document.getElementById('end-game-results').style.display = 'none';
        
        playBackgroundMusic();

        updateScoreboard();
        setupAnswerInputs();
        
        currentQuestionIndex = 0;
        document.getElementById('question-text').innerHTML = `S·∫µn s√†ng cho C√¢u h·ªèi ${currentQuestionIndex + 1}?`;
        document.getElementById('options-container').innerHTML = "";
        document.getElementById('timer').innerHTML = "30";
        document.getElementById('status-message').style.display = 'none';

        document.getElementById('start-btn').innerHTML = `B·∫ÆT ƒê·∫¶U C√ÇU H·ªéI ${currentQuestionIndex + 1}`;
        document.getElementById('show-answer-btn').style.display = 'none';
        document.getElementById('calculate-btn').style.display = 'none';
        document.getElementById('start-btn').style.display = 'block';
        document.getElementById('input-score-section').style.display = 'none';
    }

    // --- C·∫≠p nh·∫≠t b·∫£ng ƒëi·ªÉm ---
    function updateScoreboard() {
        const scoreList = document.getElementById('score-list');
        scoreList.innerHTML = '';
        groupScores.forEach((group, index) => {
            const icon = GROUP_ICONS[index % GROUP_ICONS.length];
            const div = document.createElement('div');
            div.className = 'group-score';
            div.innerHTML = `<span><span class="group-icon">${icon}</span>Nh√≥m ${group.id}:</span> <span id="score-group-${group.id}">${group.score} ƒëi·ªÉm</span>`;
            scoreList.appendChild(div);
        });
    }

    // --- Thi·∫øt l·∫≠p √¥ nh·∫≠p ƒë√°p √°n ---
    function setupAnswerInputs() {
        const inputTable = document.getElementById('group-answer-inputs');
        inputTable.innerHTML = '';
        
        const numGroups = groupScores.length;

        let labelRow = '<tr>';
        let inputRow = '<tr>';
        
        for (let i = 1; i <= numGroups; i++) {
            const label = `<label for="ans-group-${i}">Nh√≥m ${i}</label>`;
            const input = `<input type="text" id="ans-group-${i}" maxlength="1" pattern="[A-Da-d]" required>`;
            
            labelRow += `<th>${label}</th>`;
            inputRow += `<td>${input}</td>`;
        }
        
        labelRow += '</tr>';
        inputRow += '</tr>';
        
        inputTable.innerHTML = labelRow + inputRow;
    }

    // --- T·∫£i v√† ch·∫°y c√¢u h·ªèi ti·∫øp theo ---
    function nextQuestion() {
        if (currentQuestionIndex >= questions.length) {
            endGame();
            return;
        }

        clearInterval(timer); 
        timeLeft = 30;

        const q = questions[currentQuestionIndex];
        const optionsContainer = document.getElementById('options-container');
        
        document.getElementById('question-text').innerHTML = `<strong>${q.text}</strong>`;
        optionsContainer.innerHTML = '';

        q.options.forEach((option) => {
            const formattedOption = option.replace(/^([A-D]\.)/, '<strong>$1</strong>'); 

            const p = document.createElement('p');
            p.className = 'option';
            p.innerHTML = formattedOption;
            optionsContainer.appendChild(p);
        });

        Array.from(optionsContainer.children).forEach(p => p.classList.remove('answer'));

        document.getElementById('start-btn').style.display = 'none';
        document.getElementById('show-answer-btn').style.display = 'none';
        document.getElementById('calculate-btn').style.display = 'none'; 
        document.getElementById('input-score-section').style.display = 'block'; 
        
        document.getElementById('timer').innerHTML = timeLeft;
        document.getElementById('status-message').style.display = 'none';
        
        setupAnswerInputs(); 
        startTimer();
    }

    // --- ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c ---
    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerHTML = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(timer);
                
                document.getElementById('status-message').style.display = 'block';
                document.getElementById('question-text').innerHTML = `<strong>${questions[currentQuestionIndex].text}</strong> H·∫øt gi·ªù! Vui l√≤ng nh·∫•n "XEM ƒê√ÅP √ÅN"...`;
                
                document.getElementById('show-answer-btn').style.display = 'block';
                Array.from(document.querySelectorAll('#group-answer-inputs input')).forEach(input => input.disabled = true);
                
                // T·∫°m d·ª´ng nh·∫°c n·ªÅn khi h·∫øt gi·ªù
                stopBackgroundMusic();
            }
        }, TIMER_INTERVAL_MS);
    }

    // --- Hi·ªÉn th·ªã ƒë√°p √°n ---
    function showAnswer() {
        // Ph√°t nh·∫°c n·ªÅn tr·ªü l·∫°i
        playBackgroundMusic(); 

        document.getElementById('show-answer-btn').style.display = 'none';
        document.getElementById('status-message').style.display = 'none'; 

        const q = questions[currentQuestionIndex];
        const options = document.getElementById('options-container').children;
        const answerKey = q.answerKey;
        const answerIndex = answerKeyMap[answerKey];

        if (answerIndex >= 0 && answerIndex < options.length) {
            options[answerIndex].classList.add('answer');
        }

        document.getElementById('question-text').innerHTML = `<strong>${q.text}</strong> ƒê√°p √°n ƒë√£ ƒë∆∞·ª£c hi·ªÉn th·ªã! Vui l√≤ng nh·∫•n "T√çNH ƒêI·ªÇM C√ÇU N√ÄY".`;
        document.getElementById('calculate-btn').style.display = 'block'; 
    }

    // --- T√≠nh ƒëi·ªÉm cho c√¢u hi·ªán t·∫°i ---
    function calculateScore() {
        const questionToScoreIndex = currentQuestionIndex; 

        document.getElementById('calculate-btn').disabled = true;

        const currentAnswerKey = questions[questionToScoreIndex].answerKey;

        for (let i = 1; i <= numGroups; i++) {
            const inputElement = document.getElementById(`ans-group-${i}`);
            
            if (inputElement) {
                const groupAnswer = inputElement.value.toUpperCase();

                if (groupAnswer === currentAnswerKey) {
                    groupScores[i - 1].score += 1;
                }
            }
        }

        updateScoreboard();
        
        currentQuestionIndex++;
        
        document.getElementById('calculate-btn').disabled = false;
        document.getElementById('calculate-btn').style.display = 'none';
        Array.from(document.querySelectorAll('#group-answer-inputs input')).forEach(input => input.disabled = false);

        if (currentQuestionIndex < questions.length) {
            document.getElementById('start-btn').innerHTML = `B·∫ÆT ƒê·∫¶U C√ÇU H·ªéI ${currentQuestionIndex + 1}`;
            document.getElementById('start-btn').style.display = 'block';
            document.getElementById('input-score-section').style.display = 'none';
            document.getElementById('question-text').innerHTML = `S·∫µn s√†ng cho C√¢u h·ªèi ${currentQuestionIndex + 1}?`;
            document.getElementById('options-container').innerHTML = ""; 
        } else {
            endGame();
        }
    }


    // --- K·∫øt th√∫c tr√≤ ch∆°i v√† t·ªïng k·∫øt ƒëi·ªÉm ---
    function endGame() {
        playVictoryMusic(); 

        document.getElementById('game-area').style.display = 'none';
        document.getElementById('scoreboard').style.display = 'none'; 
        document.getElementById('end-game-results').style.display = 'block';

        let maxScore = -1;
        groupScores.forEach(group => {
            if (group.score > maxScore) {
                maxScore = group.score;
            }
        });

        const winners = groupScores.filter(group => group.score === maxScore);
        
        let resultHTML = "<h3>üéâ TR√í CH∆†I K·∫æT TH√öC! üéâ</h3>";
        
        resultHTML += "<h4>B·∫£ng t·ªïng k·∫øt ƒëi·ªÉm:</h4>";
        resultHTML += "<ul>";
        groupScores.forEach((group, index) => {
            const icon = GROUP_ICONS[index % GROUP_ICONS.length];
            resultHTML += `<li><span class="group-icon">${icon}</span><strong>Nh√≥m ${group.id}:</strong> ${group.score} ƒëi·ªÉm</li>`;
        });
        resultHTML += "</ul>";

        resultHTML += "<hr>";

        if (maxScore === 0) {
             resultHTML += "<h4>Kh√¥ng c√≥ nh√≥m n√†o tr·∫£ l·ªùi ƒë√∫ng c√¢u h·ªèi. H√£y c·ªë g·∫Øng h∆°n nh√©!</h4>";
        } else if (winners.length === 1) {
            const icon = GROUP_ICONS[winners[0].id - 1]; 
            resultHTML += `<h4 style="color:#d9534f;">üèÜ CH√öC M·ª™NG NH√ìM ${winners[0].id} ${icon} ƒê√É GI√ÄNH CHI·∫æN TH·∫ÆNG v·ªõi ${maxScore} ƒëi·ªÉm! üèÜ</h4>`;
        } else {
            const winnerNames = winners.map(w => `Nh√≥m ${w.id} ${GROUP_ICONS[w.id - 1]}`).join(', ');
            resultHTML += `<h4 style="color:#d9534f;">üèÜ CH√öC M·ª™NG C√ÅC NH√ìM ${winnerNames} ƒê·ªíNG H·∫†NG NH·∫§T v·ªõi ${maxScore} ƒëi·ªÉm! üèÜ</h4>`;
        }

        resultHTML += `<button onclick="document.location.reload()" class="action-button calculate-button" style="margin-top: 15px;">CH∆†I L·∫†I</button>`;

        document.getElementById('end-game-results').innerHTML = resultHTML;
    }

</script>
</body>

</html>
